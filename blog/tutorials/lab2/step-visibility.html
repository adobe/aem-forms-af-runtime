<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="icon" type="image/x-icon" href="/favicon/adobe_favicon_hidpi.ico"/><meta name="description" content="A statically generated blog example using Next.js and Markdown."/><title>Headless Adaptive Form : Creating a Multi Language Multistep Form</title><meta name="next-head-count" content="5"/><link rel="preload" href="/aem-forms-af-runtime/blog/_next/static/css/a2c04735f9357496.css" as="style"/><link rel="stylesheet" href="/aem-forms-af-runtime/blog/_next/static/css/a2c04735f9357496.css" data-n-g=""/><link rel="preload" href="/aem-forms-af-runtime/blog/_next/static/css/fac5716f93ead75b.css" as="style"/><link rel="stylesheet" href="/aem-forms-af-runtime/blog/_next/static/css/fac5716f93ead75b.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/aem-forms-af-runtime/blog/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/aem-forms-af-runtime/blog/_next/static/chunks/webpack-5d432b29c04bcc91.js" defer=""></script><script src="/aem-forms-af-runtime/blog/_next/static/chunks/framework-0ba0ddd33199226d.js" defer=""></script><script src="/aem-forms-af-runtime/blog/_next/static/chunks/main-3467fefcfafd4c2f.js" defer=""></script><script src="/aem-forms-af-runtime/blog/_next/static/chunks/pages/_app-ef11c2db3cdbd1a6.js" defer=""></script><script src="/aem-forms-af-runtime/blog/_next/static/chunks/440-9ae92dc29296bd58.js" defer=""></script><script src="/aem-forms-af-runtime/blog/_next/static/chunks/pages/%5Bkind%5D/%5B...slug%5D-b25b1d0f556f83de.js" defer=""></script><script src="/aem-forms-af-runtime/blog/_next/static/8C1s0NsJ31qBnkzLbbtWa/_buildManifest.js" defer=""></script><script src="/aem-forms-af-runtime/blog/_next/static/8C1s0NsJ31qBnkzLbbtWa/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="min-h-screen"><main><div class="container mx-auto px-5 pt-20"><article class="mb-32 relative"><h1 class="post-title">Headless Adaptive Form : Creating a Multi Language Multistep Form</h1><h2 class="text-xl md:text-3xl lg:text-3xl font-bold tracking-tighter leading-tight md:leading-none mb-12 text-center">One Step visible at a time</h2><div class="link-toolbar clearfix max-w-2xl mx-auto mt-10"><div class="link-next"><a href="/aem-forms-af-runtime/blog/tutorials/lab2/finishing-touches"><span>Finishing the form</span><style data-emotion="css vubbuv">.css-vubbuv{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1em;height:1em;display:inline-block;fill:currentColor;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;font-size:1.5rem;}</style><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-vubbuv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ArrowForwardIosIcon"><path d="M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"></path></svg></a></div><div class="link-prev"><a href="/aem-forms-af-runtime/blog/tutorials/lab2/add-step-form"><style data-emotion="css vubbuv">.css-vubbuv{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1em;height:1em;display:inline-block;fill:currentColor;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;font-size:1.5rem;}</style><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-vubbuv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ArrowBackIosNewIcon"><path d="M17.77 3.77 16 2 6 12l10 10 1.77-1.77L9.54 12z"></path></svg><span>Enable Tabbed Layout for the Form</span></a></div></div><aside class="toc"><h2 class="text-lg mb-2">What&#x27;s on the page ?</h2><ul class="table-of-contents"><li class="toc-entry toc-entry-level-1"><a href="#enable-the-wizard-experience">Enable the wizard experience</a></li><li class="toc-entry toc-entry-level-2"><a href="#make-all-the-panels-hidden-except-the-first">Make all the panels hidden except the first</a></li><li class="toc-entry toc-entry-level-2"><a href="#trigger-a-custom-event-to-show-hide-steps">Trigger a custom event to show/hide steps</a></li><li class="toc-entry toc-entry-level-2"><a href="#add-validation-before-moving-to-next-step">Add validation before moving to next step</a></li></ul></aside><div class="max-w-2xl mx-auto markdown-styles_markdown__h_8de"><h1 id="enable-the-wizard-experience">Enable the wizard experience</h1>
<p>If you will notice all the tabs are visible and one can navigate from one step to another. The steps below will enable the experience where one step will be visible at a time and upon validation user will be able to navigate to the next step</p>
<h2 id="make-all-the-panels-hidden-except-the-first">Make all the panels hidden except the first</h2>
<p>We need to add the visible property to all the panels <code class="inline-code">step2</code>, <code class="inline-code">loanDetails</code> and <code class="inline-code">accountDetails</code></p>
<pre><p>Loading...</p></pre>
<p><img src="/aem-forms-af-runtime/blog/assets/tutorial/lab2/loan-form-visible.png" alt="Image"/></p>
<p>But now we are not able to navigate to the any of the panels. The next step will enable navigation between the different panels on click of a button</p>
<h2 id="trigger-a-custom-event-to-show-hide-steps">Trigger a custom event to show/hide steps</h2>
<p>In this particular use case we need to show the OTP tab after clicks on the <code class="inline-code">View Loan Eligibility</code> button. To do that, we need to</p>
<ol>
<li>trigger an event on click of the button</li>
</ol>
<pre><div class="code"><style data-emotion="css 1wf493t">.css-1wf493t{text-align:center;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;font-size:1.5rem;padding:8px;border-radius:50%;overflow:visible;color:rgba(0, 0, 0, 0.54);-webkit-transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;}.css-1wf493t:hover{background-color:rgba(0, 0, 0, 0.04);}@media (hover: none){.css-1wf493t:hover{background-color:transparent;}}.css-1wf493t.Mui-disabled{background-color:transparent;color:rgba(0, 0, 0, 0.26);}</style><style data-emotion="css 1yxmbwk">.css-1yxmbwk{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0;border:0;margin:0;border-radius:0;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;-moz-appearance:none;-webkit-appearance:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;text-align:center;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;font-size:1.5rem;padding:8px;border-radius:50%;overflow:visible;color:rgba(0, 0, 0, 0.54);-webkit-transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;}.css-1yxmbwk::-moz-focus-inner{border-style:none;}.css-1yxmbwk.Mui-disabled{pointer-events:none;cursor:default;}@media print{.css-1yxmbwk{-webkit-print-color-adjust:exact;color-adjust:exact;}}.css-1yxmbwk:hover{background-color:rgba(0, 0, 0, 0.04);}@media (hover: none){.css-1yxmbwk:hover{background-color:transparent;}}.css-1yxmbwk.Mui-disabled{background-color:transparent;color:rgba(0, 0, 0, 0.26);}</style><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeMedium copy-icon css-1yxmbwk" tabindex="0" type="button" aria-label="copy"><style data-emotion="css vubbuv">.css-vubbuv{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1em;height:1em;display:inline-block;fill:currentColor;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;font-size:1.5rem;}</style><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-vubbuv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ContentCopyIcon"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"></path></svg></button><div style="color:white;background:hsl(30, 20%, 25%);text-shadow:0 -.1em .2em black;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border:.3em solid hsl(30, 20%, 40%);border-radius:.5em;box-shadow:1px 1px .5em black inset"><code class="language-json" style="color:white;background:none;text-shadow:0 -.1em .2em black;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:hsl(350, 40%, 70%)">&quot;events&quot;</span><span class="token" style="color:hsl(40, 90%, 60%)">:</span><span> </span><span class="token" style="-opacity:.7">{</span><span>
</span><span>    </span><span class="token" style="color:hsl(350, 40%, 70%)">&quot;click&quot;</span><span> </span><span class="token" style="color:hsl(40, 90%, 60%)">:</span><span> </span><span class="token" style="color:hsl(75, 70%, 60%)">&quot;dispatchEvent(&#x27;custom:verifyOTP&#x27;)&quot;</span><span>
</span><span></span><span class="token" style="-opacity:.7">}</span></code></div></div></pre>
<p>The <code class="inline-code">dispatchEvent</code> API takes an event name and triggers it on the entire form.</p>
<ol start="2">
<li>add a listener of that event on the panel <code class="inline-code">step2</code> and make that panel visible</li>
</ol>
<pre><div class="code"><style data-emotion="css 1wf493t">.css-1wf493t{text-align:center;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;font-size:1.5rem;padding:8px;border-radius:50%;overflow:visible;color:rgba(0, 0, 0, 0.54);-webkit-transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;}.css-1wf493t:hover{background-color:rgba(0, 0, 0, 0.04);}@media (hover: none){.css-1wf493t:hover{background-color:transparent;}}.css-1wf493t.Mui-disabled{background-color:transparent;color:rgba(0, 0, 0, 0.26);}</style><style data-emotion="css 1yxmbwk">.css-1yxmbwk{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0;border:0;margin:0;border-radius:0;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;-moz-appearance:none;-webkit-appearance:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;text-align:center;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;font-size:1.5rem;padding:8px;border-radius:50%;overflow:visible;color:rgba(0, 0, 0, 0.54);-webkit-transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;}.css-1yxmbwk::-moz-focus-inner{border-style:none;}.css-1yxmbwk.Mui-disabled{pointer-events:none;cursor:default;}@media print{.css-1yxmbwk{-webkit-print-color-adjust:exact;color-adjust:exact;}}.css-1yxmbwk:hover{background-color:rgba(0, 0, 0, 0.04);}@media (hover: none){.css-1yxmbwk:hover{background-color:transparent;}}.css-1yxmbwk.Mui-disabled{background-color:transparent;color:rgba(0, 0, 0, 0.26);}</style><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeMedium copy-icon css-1yxmbwk" tabindex="0" type="button" aria-label="copy"><style data-emotion="css vubbuv">.css-vubbuv{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1em;height:1em;display:inline-block;fill:currentColor;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;font-size:1.5rem;}</style><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-vubbuv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ContentCopyIcon"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"></path></svg></button><div style="color:white;background:hsl(30, 20%, 25%);text-shadow:0 -.1em .2em black;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border:.3em solid hsl(30, 20%, 40%);border-radius:.5em;box-shadow:1px 1px .5em black inset"><code class="language-json" style="color:white;background:none;text-shadow:0 -.1em .2em black;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:hsl(350, 40%, 70%)">&quot;events&quot;</span><span> </span><span class="token" style="color:hsl(40, 90%, 60%)">:</span><span> </span><span class="token" style="-opacity:.7">{</span><span>
</span><span>    </span><span class="token" style="color:hsl(350, 40%, 70%)">&quot;custom:verifyOTP&quot;</span><span> </span><span class="token" style="color:hsl(40, 90%, 60%)">:</span><span> </span><span class="token" style="color:hsl(75, 70%, 60%)">&quot;{visible : true()}&quot;</span><span>
</span><span></span><span class="token" style="-opacity:.7">}</span><span class="token" style="-opacity:.7">,</span></code></div></div></pre>
<p>In AF Definition, the event handlers return an object. That object is mapped to the properties of the field. So in the snippet above, whenever the event <code class="inline-code">custom:verifyOTP</code> is triggered, the handler will return an object indicating  set the <code class="inline-code">visible</code> property of the field to <code class="inline-code">true</code>. Any number of propertis can be returned from the event handler. For instance if we want to change the label and disable a field on an event the snippet would be</p>
<pre><div class="code"><style data-emotion="css 1wf493t">.css-1wf493t{text-align:center;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;font-size:1.5rem;padding:8px;border-radius:50%;overflow:visible;color:rgba(0, 0, 0, 0.54);-webkit-transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;}.css-1wf493t:hover{background-color:rgba(0, 0, 0, 0.04);}@media (hover: none){.css-1wf493t:hover{background-color:transparent;}}.css-1wf493t.Mui-disabled{background-color:transparent;color:rgba(0, 0, 0, 0.26);}</style><style data-emotion="css 1yxmbwk">.css-1yxmbwk{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0;border:0;margin:0;border-radius:0;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;-moz-appearance:none;-webkit-appearance:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;text-align:center;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;font-size:1.5rem;padding:8px;border-radius:50%;overflow:visible;color:rgba(0, 0, 0, 0.54);-webkit-transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;}.css-1yxmbwk::-moz-focus-inner{border-style:none;}.css-1yxmbwk.Mui-disabled{pointer-events:none;cursor:default;}@media print{.css-1yxmbwk{-webkit-print-color-adjust:exact;color-adjust:exact;}}.css-1yxmbwk:hover{background-color:rgba(0, 0, 0, 0.04);}@media (hover: none){.css-1yxmbwk:hover{background-color:transparent;}}.css-1yxmbwk.Mui-disabled{background-color:transparent;color:rgba(0, 0, 0, 0.26);}</style><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeMedium copy-icon css-1yxmbwk" tabindex="0" type="button" aria-label="copy"><style data-emotion="css vubbuv">.css-vubbuv{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1em;height:1em;display:inline-block;fill:currentColor;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;font-size:1.5rem;}</style><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-vubbuv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ContentCopyIcon"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"></path></svg></button><div style="color:white;background:hsl(30, 20%, 25%);text-shadow:0 -.1em .2em black;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border:.3em solid hsl(30, 20%, 40%);border-radius:.5em;box-shadow:1px 1px .5em black inset"><code class="language-json" style="color:white;background:none;text-shadow:0 -.1em .2em black;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:hsl(350, 40%, 70%)">&quot;events&quot;</span><span> </span><span class="token" style="color:hsl(40, 90%, 60%)">:</span><span> </span><span class="token" style="-opacity:.7">{</span><span>
</span><span>    </span><span class="token" style="color:hsl(350, 40%, 70%)">&quot;event&quot;</span><span> </span><span class="token" style="color:hsl(40, 90%, 60%)">:</span><span> </span><span class="token" style="color:hsl(75, 70%, 60%)">&quot;{enable : false(), label : {value : &#x27;new label&#x27;}}&quot;</span><span>
</span><span></span><span class="token" style="-opacity:.7">}</span><span class="token" style="-opacity:.7">,</span></code></div></div></pre>
<pre><p>Loading...</p></pre>
<h2 id="add-validation-before-moving-to-next-step">Add validation before moving to next step</h2>
<p>The Form Specification provides a function <code class="inline-code">validate</code> to validate entire form or a Panel. The API returns an array of
error messages along with the fields that failed validations. We can add the snippet below to the button to
dispatch the event only if the validation succeeds</p>
<pre><div class="code"><style data-emotion="css 1wf493t">.css-1wf493t{text-align:center;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;font-size:1.5rem;padding:8px;border-radius:50%;overflow:visible;color:rgba(0, 0, 0, 0.54);-webkit-transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;}.css-1wf493t:hover{background-color:rgba(0, 0, 0, 0.04);}@media (hover: none){.css-1wf493t:hover{background-color:transparent;}}.css-1wf493t.Mui-disabled{background-color:transparent;color:rgba(0, 0, 0, 0.26);}</style><style data-emotion="css 1yxmbwk">.css-1yxmbwk{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0;border:0;margin:0;border-radius:0;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;-moz-appearance:none;-webkit-appearance:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;text-align:center;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;font-size:1.5rem;padding:8px;border-radius:50%;overflow:visible;color:rgba(0, 0, 0, 0.54);-webkit-transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;}.css-1yxmbwk::-moz-focus-inner{border-style:none;}.css-1yxmbwk.Mui-disabled{pointer-events:none;cursor:default;}@media print{.css-1yxmbwk{-webkit-print-color-adjust:exact;color-adjust:exact;}}.css-1yxmbwk:hover{background-color:rgba(0, 0, 0, 0.04);}@media (hover: none){.css-1yxmbwk:hover{background-color:transparent;}}.css-1yxmbwk.Mui-disabled{background-color:transparent;color:rgba(0, 0, 0, 0.26);}</style><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeMedium copy-icon css-1yxmbwk" tabindex="0" type="button" aria-label="copy"><style data-emotion="css vubbuv">.css-vubbuv{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1em;height:1em;display:inline-block;fill:currentColor;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;font-size:1.5rem;}</style><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-vubbuv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ContentCopyIcon"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"></path></svg></button><div style="color:white;background:hsl(30, 20%, 25%);text-shadow:0 -.1em .2em black;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border:.3em solid hsl(30, 20%, 40%);border-radius:.5em;box-shadow:1px 1px .5em black inset"><code class="language-json" style="color:white;background:none;text-shadow:0 -.1em .2em black;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:hsl(350, 40%, 70%)">&quot;events&quot;</span><span> </span><span class="token" style="color:hsl(40, 90%, 60%)">:</span><span> </span><span class="token" style="-opacity:.7">{</span><span>
</span><span>    </span><span class="token" style="color:hsl(350, 40%, 70%)">&quot;click&quot;</span><span> </span><span class="token" style="color:hsl(40, 90%, 60%)">:</span><span> </span><span class="token" style="color:hsl(75, 70%, 60%)">&quot;if(length(validate($parent)) == 0, dispatchEvent(&#x27;custom:verifyOTP&#x27;),{})&quot;</span><span>
</span><span></span><span class="token" style="-opacity:.7">}</span><span class="token" style="-opacity:.7">,</span></code></div></div></pre>
<pre><p>Loading...</p></pre></div><div class="link-toolbar clearfix max-w-2xl mx-auto mt-10"><div class="link-next"><a href="/aem-forms-af-runtime/blog/tutorials/lab2/finishing-touches"><span>Finishing the form</span><style data-emotion="css vubbuv">.css-vubbuv{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1em;height:1em;display:inline-block;fill:currentColor;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;font-size:1.5rem;}</style><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-vubbuv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ArrowForwardIosIcon"><path d="M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"></path></svg></a></div><div class="link-prev"><a href="/aem-forms-af-runtime/blog/tutorials/lab2/add-step-form"><style data-emotion="css vubbuv">.css-vubbuv{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1em;height:1em;display:inline-block;fill:currentColor;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;font-size:1.5rem;}</style><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-vubbuv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ArrowBackIosNewIcon"><path d="M17.77 3.77 16 2 6 12l10 10 1.77-1.77L9.54 12z"></path></svg><span>Enable Tabbed Layout for the Form</span></a></div></div></article></div></main></div><footer class="bg-neutral-50 border-t border-neutral-200"><div class="container mx-auto px-5 "><div class="py-28 flex flex-col lg:flex-row items-center"><h3 class="text-4xl lg:text-[2.5rem] font-bold tracking-tighter leading-tight text-center lg:text-left mb-10 lg:mb-0 lg:pr-4 lg:w-1/2">AEM Adaptive Form</h3></div></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Headless Adaptive Form : Creating a Multi Language Multistep Form","date":"2020-03-16T05:35:07.322Z","slug":["lab2","step-visibility"],"content":"\n# Enable the wizard experience\n\nIf you will notice all the tabs are visible and one can navigate from one step to another. The steps below will enable the experience where one step will be visible at a time and upon validation user will be able to navigate to the next step\n\n## Make all the panels hidden except the first\n\nWe need to add the visible property to all the panels `step2`, `loanDetails` and `accountDetails`\n\n```codeDiff\n/assets/tutorial/lab2/json/loan-form-tabs.form.json;/assets/tutorial/lab2/json/visible-tabs-1.form.json\n```\n\n![Image](/assets/tutorial/lab2/loan-form-visible.png)\n\n\nBut now we are not able to navigate to the any of the panels. The next step will enable navigation between the different panels on click of a button\n\n## Trigger a custom event to show/hide steps\n\nIn this particular use case we need to show the OTP tab after clicks on the `View Loan Eligibility` button. To do that, we need to \n\n1. trigger an event on click of the button\n\n```json\n\"events\": {\n    \"click\" : \"dispatchEvent('custom:verifyOTP')\"\n}\n```\n\nThe `dispatchEvent` API takes an event name and triggers it on the entire form.\n\n2. add a listener of that event on the panel `step2` and make that panel visible\n\n```json\n\"events\" : {\n    \"custom:verifyOTP\" : \"{visible : true()}\"\n},\n```\n\nIn AF Definition, the event handlers return an object. That object is mapped to the properties of the field. So in the snippet above, whenever the event `custom:verifyOTP` is triggered, the handler will return an object indicating  set the `visible` property of the field to `true`. Any number of propertis can be returned from the event handler. For instance if we want to change the label and disable a field on an event the snippet would be\n\n```json\n\"events\" : {\n    \"event\" : \"{enable : false(), label : {value : 'new label'}}\"\n},\n```\n\n```codeDiff\n/assets/tutorial/lab2/json/visible-tabs-1.form.json;/assets/tutorial/lab2/json/visible-tabs-2.form.json\n```\n\n## Add validation before moving to next step\n\nThe Form Specification provides a function `validate` to validate entire form or a Panel. The API returns an array of\nerror messages along with the fields that failed validations. We can add the snippet below to the button to \ndispatch the event only if the validation succeeds\n\n```json\n\"events\" : {\n    \"click\" : \"if(length(validate($parent)) == 0, dispatchEvent('custom:verifyOTP'),{})\"\n},\n```\n\n```codeDiff\n/assets/tutorial/lab2/json/visible-tabs-2.form.json;/assets/tutorial/lab2/json/visible-tabs-3.form.json\n```\n","toc":[{"level":1,"text":"Enable the wizard experience","id":"enable-the-wizard-experience"},{"level":2,"text":"Make all the panels hidden except the first","id":"make-all-the-panels-hidden-except-the-first"},{"level":2,"text":"Trigger a custom event to show/hide steps","id":"trigger-a-custom-event-to-show-hide-steps"},{"level":2,"text":"Add validation before moving to next step","id":"add-validation-before-moving-to-next-step"}],"nextTitle":"Finishing the form","nextSlug":["lab2","finishing-touches"],"prevTitle":"Enable Tabbed Layout for the Form","prevSlug":["lab2","add-step-form"],"subTitle":"One Step visible at a time","kind":"tutorials"}},"__N_SSG":true},"page":"/[kind]/[...slug]","query":{"kind":"tutorials","slug":["lab2","step-visibility"]},"buildId":"8C1s0NsJ31qBnkzLbbtWa","assetPrefix":"/aem-forms-af-runtime/blog","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>